`timescale 1ns / 1ps

module i2c_top(
    input  clk,
    input  rst,
    input  newd,
    input  op,
    input  [6:0] addr,
    input  [7:0] din,
    output [7:0] dout,
    output busy,
    output ack_err,
    output done
);

/////////////////////////////////////////////////////////
// SHARED I2C BUS WIRES
/////////////////////////////////////////////////////////
wire scl_master;
wire sda_wire;

/////////////////////////////////////////////////////////
// MASTER INSTANCE
/////////////////////////////////////////////////////////
i2c_master master_inst (
    .clk(clk),
    .rst(rst),
    .newd(newd),
    .addr(addr),
    .op(op),
    .sda(sda_wire),
    .scl(scl_master),
    .din(din),
    .dout(dout),
    .busy(busy),
    .ack_err(ack_err),
    .done(done)
);

/////////////////////////////////////////////////////////
// SINGLE SLAVE INSTANCE (Address 0x48)
/////////////////////////////////////////////////////////
i2c_Slave1 slave1_inst (
    .scl_s1(scl_master),
    .clk(clk),
    .rst(rst),
    .sda_s1(sda_wire),
    .ack_err(),   // not required at top
    .done()       // not required at top
);

endmodule
